<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Delicias Florencia: tortas caseras en vaso artesanales. Sabores, precios por cantidad y entrega a domicilio en la Región Metropolitana.">
    <title>Delicias Florencia - Tortas Caseras en Vaso</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Leaflet CSS para mapa real -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="navbar">
            <div class="nav-container">
                <div class="logo">
                    <img src="logo-delicias-florencia.jpg" alt="Delicias Florencia" class="logo-img">
                </div>
                <ul class="nav-menu" id="primary-navigation">
                    <li><a href="#inicio" class="nav-link">Inicio</a></li>
                    <li><a href="#sabores" class="nav-link">Sabores</a></li>
                    <li><a href="#precios" class="nav-link">Precios</a></li>
                    <li><a href="#cobertura" class="nav-link">Cobertura</a></li>
                    <li><a href="#cotizar" class="nav-link">Cotizar</a></li>
                </ul>
                <button type="button" class="hamburger" aria-label="Abrir menú" aria-expanded="false" aria-controls="primary-navigation">
                    <span class="bar" aria-hidden="true"></span>
                    <span class="bar" aria-hidden="true"></span>
                    <span class="bar" aria-hidden="true"></span>
                </button>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <section id="inicio" class="hero">
        <div class="hero-content">
            <h1 class="hero-title">Delicias Florencia</h1>
            <p class="hero-subtitle">Tortas caseras en vaso, hechas con amor</p>
            <p class="hero-description">Disfruta de nuestras deliciosas tortas artesanales en una presentación única y elegante</p>
            <a href="#cotizar" class="cta-button">Cotizar Ahora</a>
        </div>
        <div class="hero-image">
            <div class="hero-cake-showcase">
                <img src="torta1.jpg" alt="Tortas artesanales Delicias Florencia en vaso" class="hero-cake" decoding="async">
            </div>
        </div>
    </section>

    <!-- Sabores Section -->
    <section id="sabores" class="sabores">
        <div class="container">
            <h2 class="section-title">Nuestros Sabores</h2>
            <p class="section-subtitle">Cada torta es preparada con ingredientes frescos y el mejor cariño</p>
            
            <div class="sabores-grid">
                <div class="sabor-card">
                    <div class="sabor-image">
                        <img src="tres-leches.jpg" alt="Torta Tres Leches artesanal" loading="lazy" decoding="async">
                    </div>
                    <div class="sabor-content">
                        <h3>Tres Leches</h3>
                        <p>Deliciosa torta empapada en tres tipos de leche, coronada con crema chantilly</p>
                    </div>
                </div>

                <div class="sabor-card">
                    <div class="sabor-image">
                        <img src="selva-negra.jpg" alt="Torta Selva Negra con cerezas" loading="lazy" decoding="async">
                    </div>
                    <div class="sabor-content">
                        <h3>Selva Negra</h3>
                        <p>Bizcocho de chocolate con cerezas, crema chantilly y virutas de chocolate</p>
                    </div>
                </div>

                <div class="sabor-card">
                    <div class="sabor-image">
                        <img src="oreo.jpg" alt="Torta Oreo con crema" loading="lazy" decoding="async">
                    </div>
                    <div class="sabor-content">
                        <h3>Oreo</h3>
                        <p>Irresistible combinación de galletas Oreo con crema y capas de chocolate</p>
                    </div>
                </div>
                <div class="sabor-card">
                    <div class="sabor-image">
                        <img src="pina-crema.jpg" alt="Torta Piña Crema con manjar" loading="lazy" decoding="async">
                    </div>
                    <div class="sabor-content">
                        <h3>Piña Crema</h3>
                        <p>Deliciosa torta de bizcocho blanco, piña, crema y manjar.</p>
                    </div>
                </div>
            </div>

            <div class="sabores-note">
                <i class="fas fa-info-circle"></i>
                <p>¡Próximamente agregaremos más sabores deliciosos!</p>
            </div>
        </div>
    </section>

    <!-- Precios Section -->
    <section id="precios" class="precios">
        <div class="container">
            <h2 class="section-title">Precios</h2>
            <div class="precios-simple" aria-label="Resumen de precios por tramo">
                <div class="precio-mejor" role="group" aria-label="Mejor precio disponible">
                    <span class="pm-etiqueta">Mejor precio</span>
                    <div class="pm-valor" id="pm-valor" aria-live="polite" aria-label="Precio mejor tramo">
                        <span class="pm-monto" id="pm-mejor-monto">$1.500</span>
                        <span class="pm-unidad">c/u</span>
                    </div>
                    <p class="pm-detalle" id="pm-detalle-text">Desde 20 unidades · Combina sabores</p>
                    <a href="#cotizar" class="pm-cta" aria-label="Ir a cotizar con mejor precio">Cotizar</a>
                </div>
                <p class="linea-tramos" id="linea-tramos" aria-label="Otros tramos">
                    6-14: <strong>$1.700</strong> · 15-19: <strong>$1.600</strong> · 20+: <strong>$1.500</strong>
                </p>
                <p class="nota-minimo" id="nota-minimo">Pedido mínimo 6 unidades.</p>
            </div>
        </div>
    </section>

    <!-- Cobertura Section -->
    <section id="cobertura" class="cobertura">
        <div class="container">
            <h2 class="section-title">Zonas de Cobertura</h2>
            <p class="section-subtitle">Entregamos en las siguientes comunas de la Región Metropolitana</p>
            
            <div class="cobertura-content">
                <div class="cobertura-map">
                    <div id="coverage-map" aria-label="Mapa de comunas donde realizamos entregas">
                        <div class="coverage-map-fallback">
                            <i class="fas fa-map-marker-alt" aria-hidden="true"></i>
                            <p style="font-size:.8rem;">Cargando mapa…</p>
                        </div>
                    </div>
                </div>
                <div class="cobertura-list">
                    <h3>Comunas que atendemos:</h3>
                    <div class="comunas-grid">
                        <div class="comuna-item">
                            <i class="fas fa-map-pin"></i>
                            <span>San Bernardo</span>
                        </div>
                        <div class="comuna-item">
                            <i class="fas fa-map-pin"></i>
                            <span>La Pintana</span>
                        </div>
                        <div class="comuna-item">
                            <i class="fas fa-map-pin"></i>
                            <span>El Bosque</span>
                        </div>
                        <div class="comuna-item">
                            <i class="fas fa-map-pin"></i>
                            <span>La Cisterna</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="entrega-info">
                <div class="entrega-card">
                    <i class="fas fa-truck"></i>
                    <h4>Entrega a Domicilio</h4>
                    <p>Llevamos tus tortas directamente a tu puerta</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Cotización Section -->
    <section id="cotizar" class="cotizar cotizar-grid">
    <div class="sabores-cards" id="sabores-pedido" data-dinamico="true"><!-- Tarjetas generadas dinámicamente --></div>
        <div class="resumen-pedido">
            <h3>Resumen</h3>
            <form id="form-datos-cliente" novalidate style="display:flex;flex-direction:column;gap:.6rem;margin-bottom:1rem;">
                <div class="resumen-form-group">
                    <label for="campo-nombre">Nombre <span aria-hidden="true" style="color:#c33">*</span></label>
                    <input id="campo-nombre" name="nombre" type="text" autocomplete="name" required placeholder="Tu nombre" />
                </div>
                <div class="resumen-form-group">
                    <label for="campo-telefono">Teléfono / WhatsApp <span aria-hidden="true" style="color:#c33">*</span></label>
                    <input id="campo-telefono" name="telefono" type="tel" inputmode="tel" required placeholder="+56 9 ..." />
                </div>
                <div class="resumen-form-group">
                    <label for="campo-fecha">Fecha deseada (mín. 4 días) <span aria-hidden="true" style="color:#c33">*</span></label>
                    <input id="campo-fecha" name="fecha" type="date" required />
                </div>
                <div class="resumen-form-group">
                    <label for="campo-comuna">Comuna <span aria-hidden="true" style="color:#c33">*</span></label>
                    <select id="campo-comuna" name="comuna" required>
                        <option value="" disabled selected>Selecciona...</option>
                        <option value="San Bernardo">San Bernardo</option>
                        <option value="La Pintana">La Pintana</option>
                        <option value="El Bosque">El Bosque</option>
                        <option value="La Cisterna">La Cisterna</option>
                    </select>
                    <small class="hint-comuna">Solo entregamos en estas comunas</small>
                </div>
                <div class="resumen-form-group">
                    <label for="campo-direccion">Dirección completa <span aria-hidden="true" style="color:#c33">*</span></label>
                    <input id="campo-direccion" name="direccion" type="text" required placeholder="Calle, número, depto, villa..." />
                </div>
                <div class="resumen-form-group">
                    <label for="campo-comentarios">Comentarios</label>
                    <textarea id="campo-comentarios" name="comentarios" rows="2" placeholder="Detalles, horario, etc."></textarea>
                </div>
            </form>
            <ul id="resumen-lista"></ul>
            <div class="resumen-totales" aria-live="polite">
                <span id="resumen-precio-unitario" data-default="$1.700">$1.700</span>
                <span>* <span id="resumen-total-cantidad">0</span></span>
                <span>Total</span>
                <span id="resumen-total">$0</span>
            </div>
            <div id="upsell-hint" class="upsell-hint" aria-live="polite"></div>
            <button id="btn-solicitar-pedido" data-action="solicitar" class="submit-button" style="margin-top:1rem;" aria-disabled="true">Solicitar pedido</button>
            <div id="live-updates" class="visually-hidden" aria-live="polite" aria-atomic="true"></div>
        </div>
    </section>

    <!-- Barra móvil de acción rápida -->
    <div id="mobile-cta-bar" class="mobile-cta-bar" aria-hidden="true">
        <div class="m-total" id="mobile-bar-total">0 uds · $0</div>
        <button type="button" id="btn-solicitar-mobile" data-action="solicitar" class="submit-button m-btn" disabled aria-disabled="true" aria-label="Solicitar pedido desde barra móvil">Solicitar</button>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <img src="logo-delicias-florencia.jpg" alt="Delicias Florencia" class="footer-logo">
                    <p>Tortas caseras en vaso hechas con amor y los mejores ingredientes</p>
                </div>
                
                <div class="footer-section">
                    <h4>Contacto</h4>
                    <p><i class="fas fa-envelope"></i> deliciasflorencia@email.com</p>
                    <p><i class="fas fa-map-marker-alt"></i> Región Metropolitana</p>
                </div>
                
                <div class="footer-section">
                    <h4>Horarios</h4>
                    <p>Pedidos mínimo 4 días de anticipación</p>
                    <p>Respuesta en menos de 24 horas</p>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2024 Delicias Florencia. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <!-- Turf.js para unir polígonos de comunas -->
    <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js" integrity="sha384-BmxEC1AmoPj1qtbLragANMmsa1+2k5D3NHdMBcJvTnv0yW3Twhz5EK6wIBm8GblA" crossorigin="anonymous"></script>
    <script src="script.js"></script>
</body>
</html>